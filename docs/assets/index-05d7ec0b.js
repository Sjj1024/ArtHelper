import{u as e,r as s,j as a,S as t,B as i,h as l,m as r}from"./index-efa3a32c.js";import{C as m}from"./index-b686cec5.js";import{C as o}from"./index-0373e759.js";import{F as n}from"./index-ae2d5997.js";import{I as d}from"./index-8c8b720f.js";import{I as c}from"./index-06b8a89d.js";/* empty css              */import{T as j}from"./index-bf31a83e.js";import"./index-1acfbbfd.js";import"./index-47693ae2.js";import{u as p}from"./user-66ba9e41.js";import{s as u}from"./store-7211fed8.js";import{u as x}from"./useLocation-f9597f4e.js";import{S as h}from"./index-1c1deade.js";import{C as f}from"./CloseOutlined-77969fe0.js";import"./index-0a1440ec.js";import"./context-cb88fb1e.js";import"./responsiveObserve-b13564d4.js";import"./index-177532f7.js";import"./statusUtils-b010cbea.js";import"./EyeOutlined-319494bf.js";import"./SearchOutlined-03c63d28.js";import"./CalendarOutlined-8ff6678f.js";import"./pickAttrs-1cd23dfa.js";import"./CheckOutlined-f0d55485.js";function b(){const b=x(),v=e(),{model:C}=b.state;document.title="add"===C?"新增场地":"编辑场地";const[y]=n.useForm(),[w,g]=s.useState([]),[k,I]=s.useState([]),P=[{label:"周一",value:"mon"},{label:"周二",value:"tue"},{label:"周三",value:"wed"},{label:"周四",value:"thu"},{label:"周五",value:"fri"},{label:"周六",value:"sat"},{label:"周日",value:"sun"}],H=()=>{};s.useEffect((()=>{(async()=>{const e=(await p.getAgents()).data.map((e=>({label:e.providername,value:e.uuid})));g(e)})()}),[]);return a.jsx("div",{className:"field-edit-box",children:a.jsxs(n,{labelCol:{span:4},wrapperCol:{span:16},form:y,name:"control-hooks",onFinish:e=>{},style:{maxWidth:600},children:[a.jsx(n.Item,{name:"proxy",label:"所属代理",rules:[{required:!0}],children:a.jsx(h,{placeholder:"请选择代理",allowClear:!0,onChange:async e=>{const s=(await p.getStores({agenuuid:e})).data.map((e=>({label:e.providername,value:e.uuid})));I(s)},options:w})}),a.jsx(n.Item,{name:"store",label:"所属门店",rules:[{required:!0}],children:a.jsx(h,{placeholder:"请选择门店",onChange:e=>{},options:k,allowClear:!0})}),a.jsx(n.Item,{name:"storePlace",label:"场地名称",rules:[{required:!0,max:12}],children:a.jsx(d,{})}),a.jsx(n.Item,{name:"time",label:"运营时间",children:a.jsx(j.RangePicker,{format:"HH:mm"})}),a.jsx(n.Item,{name:"limit",label:"人数限制",children:a.jsx(c,{min:0,max:99})}),a.jsx(n.List,{name:"items",children:(e=[],{add:s,remove:t})=>a.jsx("div",{style:{display:"flex",rowGap:16,flexDirection:"column",justifyContent:"center"},children:e.map(((e,s)=>a.jsxs(m,{size:"small",title:`价格规则${e.name+1}`,extra:a.jsx(f,{onClick:()=>{t(e.name)}}),children:[a.jsx(n.Item,{label:"整场价格",name:[e.name,"allPrice"],children:a.jsx(d,{})}),a.jsx(n.Item,{label:"散客价格",name:[e.name,"customPrice"],children:a.jsx(d,{})}),a.jsx(n.Item,{label:"价格时间",name:[e.name,"priceTime"],children:a.jsx(j.RangePicker,{format:"HH:mm"})}),a.jsx("div",{className:"week",children:a.jsx(o.Group,{options:P,onChange:H})})]},e.key)))})},"addPrice"),a.jsxs(t,{className:"bottom-btn",children:[a.jsx(i,{type:"primary",className:"submit",onClick:async()=>{try{const e=await y.validateFields(),s={provideruuid:e.store,stationname:e.storePlace,start_time:e.time?l(e.time[0]).format("HH:mm"):"",end_time:e.time?l(e.time[1]).format("HH:mm"):"",maxpeople:e.limit},a=await u.savePlay(s);a&&200===a.code?(r.success("创建成功"),v("/store/field")):r.error((null==a?void 0:a.message)??"操作失败")}catch(e){}},children:"提交"}),a.jsx(i,{htmlType:"button",onClick:()=>{v(-1)},children:"返回"})]})]})})}export{b as default};
