import{r as e,_ as t,s as a,y as n,as as o,q as i,E as r,f as s,K as l,ac as c,a2 as d,C as u,al as m,U as p,Y as f,u as v,d as h,j as y,B as g,m as x,h as k,T as b}from"./index-efa3a32c.js";import{a as C}from"./index-639ffc53.js";import"./index-0373e759.js";/* empty css              */import"./index-8c8b720f.js";import"./index-9b480cfe.js";import"./index-9b8a3313.js";import{D as j}from"./index-65748fb5.js";import{D as N}from"./index-1acfbbfd.js";import"./index-47693ae2.js";import{u as w}from"./user-66ba9e41.js";import{g as S}from"./game-da7109a7.js";import{s as E}from"./server-30e87f5b.js";import{u as O}from"./useSetState-78ffd672.js";import{S as I}from"./index-1c1deade.js";import{P as M}from"./Portal-08554165.js";import{p as D}from"./pickAttrs-1cd23dfa.js";import{f as T}from"./context-cb88fb1e.js";import{S as K}from"./SearchOutlined-24304577.js";import{E as L}from"./EyeOutlined-a014c032.js";import"./index-40784afc.js";import"./getScrollBarSize-c6833c2b.js";import"./isEqual-8ee5b3ce.js";import"./useForceUpdate-9ad39bdf.js";import"./SearchOutlined-03c63d28.js";import"./index-0a1440ec.js";import"./index-177532f7.js";import"./statusUtils-b010cbea.js";import"./EyeOutlined-319494bf.js";import"./responsiveObserve-b13564d4.js";import"./CalendarOutlined-8ff6678f.js";import"./CheckOutlined-f0d55485.js";var z=e.createContext(null),R=function(o){var i=o.prefixCls,r=o.className,s=o.style,l=o.children,c=o.containerRef,d=o.id,u={onMouseEnter:o.onMouseEnter,onMouseOver:o.onMouseOver,onMouseLeave:o.onMouseLeave,onClick:o.onClick,onKeyDown:o.onKeyDown,onKeyUp:o.onKeyUp};return e.createElement(e.Fragment,null,e.createElement("div",t({id:d,className:a("".concat(i,"-content"),r),style:n({},s),"aria-modal":"true",role:"dialog",ref:c},u),l))};function P(e){return"string"==typeof e&&String(Number(e))===e?(o(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var Y={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function U(o,c){var d,u,m,p,f=o.prefixCls,v=o.open,h=o.placement,y=o.inline,g=o.push,x=o.forceRender,k=o.autoFocus,b=o.keyboard,C=o.rootClassName,j=o.rootStyle,N=o.zIndex,w=o.className,S=o.id,E=o.style,O=o.motion,I=o.width,M=o.height,T=o.children,K=o.contentWrapperStyle,L=o.mask,U=o.maskClosable,A=o.maskMotion,F=o.maskClassName,V=o.maskStyle,B=o.afterOpenChange,q=o.onClose,H=o.onMouseEnter,$=o.onMouseOver,_=o.onMouseLeave,W=o.onClick,X=o.onKeyDown,J=o.onKeyUp,Q=e.useRef(),G=e.useRef(),Z=e.useRef();e.useImperativeHandle(c,(function(){return Q.current}));e.useEffect((function(){var e;v&&k&&(null===(e=Q.current)||void 0===e||e.focus({preventScroll:!0}))}),[v]);var ee=e.useState(!1),te=i(ee,2),ae=te[0],ne=te[1],oe=e.useContext(z),ie=null!==(d=null!==(u=null===(m=!1===g?{distance:0}:!0===g?{}:g||{})||void 0===m?void 0:m.distance)&&void 0!==u?u:null==oe?void 0:oe.pushDistance)&&void 0!==d?d:180,re=e.useMemo((function(){return{pushDistance:ie,push:function(){ne(!0)},pull:function(){ne(!1)}}}),[ie]);e.useEffect((function(){var e,t;v?null==oe||null===(e=oe.push)||void 0===e||e.call(oe):null==oe||null===(t=oe.pull)||void 0===t||t.call(oe)}),[v]),e.useEffect((function(){return function(){var e;null==oe||null===(e=oe.pull)||void 0===e||e.call(oe)}}),[]);var se=L&&e.createElement(r,t({key:"mask"},A,{visible:v}),(function(t,o){var i=t.className,r=t.style;return e.createElement("div",{className:a("".concat(f,"-mask"),i,F),style:n(n({},r),V),onClick:U&&v?q:void 0,ref:o})})),le="function"==typeof O?O(h):O,ce={};if(ae&&ie)switch(h){case"top":ce.transform="translateY(".concat(ie,"px)");break;case"bottom":ce.transform="translateY(".concat(-ie,"px)");break;case"left":ce.transform="translateX(".concat(ie,"px)");break;default:ce.transform="translateX(".concat(-ie,"px)")}"left"===h||"right"===h?ce.width=P(I):ce.height=P(M);var de={onMouseEnter:H,onMouseOver:$,onMouseLeave:_,onClick:W,onKeyDown:X,onKeyUp:J},ue=e.createElement(r,t({key:"panel"},le,{visible:v,forceRender:x,onVisibleChanged:function(e){null==B||B(e)},removeOnLeave:!1,leavedClassName:"".concat(f,"-content-wrapper-hidden")}),(function(i,r){var s=i.className,l=i.style;return e.createElement("div",t({className:a("".concat(f,"-content-wrapper"),s),style:n(n(n({},ce),l),K)},D(o,{data:!0})),e.createElement(R,t({id:S,containerRef:r,prefixCls:f,className:w,style:E},de),T))})),me=n({},j);return N&&(me.zIndex=N),e.createElement(z.Provider,{value:re},e.createElement("div",{className:a(f,"".concat(f,"-").concat(h),C,(p={},s(p,"".concat(f,"-open"),v),s(p,"".concat(f,"-inline"),y),p)),style:me,tabIndex:-1,ref:Q,onKeyDown:function(e){var t=e.keyCode,a=e.shiftKey;switch(t){case l.TAB:var n;if(t===l.TAB)if(a||document.activeElement!==Z.current){if(a&&document.activeElement===G.current){var o;null===(o=Z.current)||void 0===o||o.focus({preventScroll:!0})}}else null===(n=G.current)||void 0===n||n.focus({preventScroll:!0});break;case l.ESC:q&&b&&(e.stopPropagation(),q(e))}}},se,e.createElement("div",{tabIndex:0,ref:G,style:Y,"aria-hidden":"true","data-sentinel":"start"}),ue,e.createElement("div",{tabIndex:0,ref:Z,style:Y,"aria-hidden":"true","data-sentinel":"end"})))}var A=e.forwardRef(U),F=function(t){var a=t.open,o=void 0!==a&&a,r=t.prefixCls,s=void 0===r?"rc-drawer":r,l=t.placement,d=void 0===l?"right":l,u=t.autoFocus,m=void 0===u||u,p=t.keyboard,f=void 0===p||p,v=t.width,h=void 0===v?378:v,y=t.mask,g=void 0===y||y,x=t.maskClosable,k=void 0===x||x,b=t.getContainer,C=t.forceRender,j=t.afterOpenChange,N=t.destroyOnClose,w=t.onMouseEnter,S=t.onMouseOver,E=t.onMouseLeave,O=t.onClick,I=t.onKeyDown,D=t.onKeyUp,T=e.useState(!1),K=i(T,2),L=K[0],z=K[1],R=e.useState(!1),P=i(R,2),Y=P[0],U=P[1];c((function(){U(!0)}),[]);var F=!!Y&&o,V=e.useRef(),B=e.useRef();c((function(){F&&(B.current=document.activeElement)}),[F]);if(!C&&!L&&!F&&N)return null;var q={onMouseEnter:w,onMouseOver:S,onMouseLeave:E,onClick:O,onKeyDown:I,onKeyUp:D},H=n(n({},t),{},{open:F,prefixCls:s,placement:d,autoFocus:m,keyboard:f,width:h,mask:g,maskClosable:k,inline:!1===b,afterOpenChange:function(e){var t,a;(z(e),null==j||j(e),e||!B.current||(null===(t=V.current)||void 0===t?void 0:t.contains(B.current)))||(null===(a=B.current)||void 0===a||a.focus({preventScroll:!0}))},ref:V},q);return e.createElement(M,{open:F||C||L,autoDestroy:!1,getContainer:b,autoLock:g&&(F||L)},e.createElement(A,H))},V=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a};d("default","large");var B={distance:180};function q(n){var o=n.width,r=n.height,l=n.size,c=void 0===l?"default":l,d=n.closable,v=void 0===d||d,h=n.mask,y=void 0===h||h,g=n.push,x=void 0===g?B:g,k=n.closeIcon,b=void 0===k?e.createElement(f,null):k,C=n.bodyStyle,j=n.drawerStyle,N=n.className,w=n.visible,S=n.open,E=n.children,O=n.style,I=n.title,M=n.headerStyle,D=n.onClose,K=n.footer,L=n.footerStyle,z=n.prefixCls,R=n.getContainer,P=n.extra,Y=n.afterVisibleChange,U=n.afterOpenChange,A=V(n,["width","height","size","closable","mask","push","closeIcon","bodyStyle","drawerStyle","className","visible","open","children","style","title","headerStyle","onClose","footer","footerStyle","prefixCls","getContainer","extra","afterVisibleChange","afterOpenChange"]),q=e.useContext(u),H=q.getPopupContainer,$=q.getPrefixCls,_=q.direction,W=$("drawer",z),X=void 0===R&&H?function(){return H(document.body)}:R,J=v&&e.createElement("button",{type:"button",onClick:D,"aria-label":"Close",className:"".concat(W,"-close")},b);[["visible","open"],["afterVisibleChange","afterOpenChange"]].forEach((function(e){var t=i(e,2);t[0],t[1]}));var Q=a(s({"no-mask":!y},"".concat(W,"-rtl"),"rtl"===_),N),G=e.useMemo((function(){return null!=o?o:"large"===c?736:378}),[o,c]),Z=e.useMemo((function(){return null!=r?r:"large"===c?736:378}),[r,c]),ee={motionName:p(W,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500};return e.createElement(m,null,e.createElement(T,{status:!0,override:!0},e.createElement(F,t({prefixCls:W,onClose:D},A,{open:null!=S?S:w,mask:y,push:x,width:G,height:Z,rootClassName:Q,getContainer:X,afterOpenChange:function(e){null==U||U(e),null==Y||Y(e)},maskMotion:ee,motion:function(e){return{motionName:p(W,"panel-motion-".concat(e)),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}},rootStyle:O}),e.createElement("div",{className:"".concat(W,"-wrapper-body"),style:t({},j)},I||v?e.createElement("div",{className:a("".concat(W,"-header"),s({},"".concat(W,"-header-close-only"),v&&!I&&!P)),style:M},e.createElement("div",{className:"".concat(W,"-header-title")},J,I&&e.createElement("div",{className:"".concat(W,"-title")},I)),P&&e.createElement("div",{className:"".concat(W,"-extra")},P)):null,e.createElement("div",{className:"".concat(W,"-body"),style:C},E),function(){if(!K)return null;var t="".concat(W,"-footer");return e.createElement("div",{className:t,style:L},K)}()))))}const{RangePicker:H}=N;function $(){document.title="比赛战绩",v();const t=h((e=>e.app.powersCode)),[a,n]=e.useState([]),[o,i]=e.useState([]),[r,s]=e.useState(!1),[l,c]=O({pageNum:1,pageSize:10,total:0}),[d,u]=O({provideruuid:void 0,storeuuid:void 0,stationuuid:void 0,startTime:void 0,endTime:void 0}),m=async e=>{const t={page:e.pageNum,limit:e.pageSize,agentuuid:d.provideruuid,provideruuid:d.storeuuid,stationuuid:d.stationuuid,starttime:d.startTime,endtime:d.endTime};s(!0);try{const a=await S.gameList(t);a&&200===a.code?(n(a.data),c({total:a.cont,pageNum:e.pageNum,pageSize:e.pageSize})):x.error((null==a?void 0:a.message)??"获取失败")}catch(a){}finally{s(!1)}},[p,f]=e.useState([]),[N,M]=e.useState([]),[D,T]=e.useState([]),[z,R]=e.useState(!1),P=e=>{R(!0),(async e=>{const t={gameuuid:e};s(!0);try{const e=await S.gameDetail(t);e&&200===e.code?i(e.data):x.error((null==e?void 0:e.message)??"获取失败")}catch(a){}finally{s(!1)}})(e.gameid)},Y=[{title:"gameid",dataIndex:"gameid",key:"gameid"},{title:"蓝方",dataIndex:"blue",key:"blue"},{title:"红方",dataIndex:"red",key:"red"},{title:"蓝方小分",dataIndex:"blueNum",key:"blueNum"},{title:"红方小分",dataIndex:"redNum",key:"redNum"},{title:"游戏",dataIndex:"game",key:"game"},{title:"运营模式",dataIndex:"operate",key:"operate"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",key:"control",width:200,render:(e,a)=>{const n=[];t.includes("record:see")&&n.push(y.jsx("span",{className:"control-btn blue",onClick:()=>P(a),children:y.jsx(b,{placement:"top",title:"详情",children:y.jsx(L,{})})},"1"));const o=[];return n.forEach(((e,t)=>{t&&o.push(y.jsx(j,{type:"vertical"},`line${t}`)),o.push(e)})),o}}],U=e.useMemo((()=>a.map(((e,t)=>{const a=0===e.isworld?"HADO3V3":"HADOWORLD";return{key:e.id,uuid:e.uuid,gameid:e.gameuuidid,blue:e.blueresult,red:e.redresult,blueNum:e.bluescore,redNum:e.redscore,game:a,operate:"普通模式",updateTime:e.addtime}}))),[l,a]),A=e.useMemo((()=>o.map(((e,t)=>({key:e.id,ranks:e.teamname,username:e.username,score:e.kodata,losing:e.koeddata,shield:e.shiledtotal,running:e.runningkm,calorie:e.caldata,hitNum:e.accdata,defenseNum:e.guardblockcount,perScore:e.performancepoint})))),[o]);return e.useEffect((()=>{m(l),(async()=>{const e=(await w.getAgents()).data.map((e=>({label:e.providername,value:e.uuid,key:e.uuid})));f(e)})()}),[]),y.jsxs("div",{className:"store-list-box",children:[y.jsx("div",{className:"g-search",children:y.jsxs("ul",{className:"search-ul",children:[y.jsxs("li",{className:"search-item",children:[y.jsxs("span",{className:"item-lable",style:{width:"80px"},children:["选择代理:"," "]}),y.jsx(I,{placeholder:"请选择代理",allowClear:!0,style:{width:"150px"},onChange:async e=>{u({provideruuid:e,storeuuid:void 0,stationuuid:void 0});const t=(await w.getStores({agenuuid:e})).data.map((e=>({label:e.providername,value:e.uuid,key:e.uuid})));M(t)},value:d.provideruuid,options:p})]}),y.jsxs("li",{className:"search-item",children:[y.jsx("span",{className:"item-lable",style:{width:"80px"},children:"选择门店:"}),y.jsx(I,{placeholder:"请选择名称",allowClear:!0,style:{width:"150px"},onChange:async e=>{if(u({storeuuid:e,stationuuid:void 0}),e){const t=(await E.getPlaygroundList({provideruuid:e})).data.map((e=>({key:e.uuid,label:e.stationname,value:e.uuid})));T(t)}else T([])},value:d.storeuuid,options:N})]}),y.jsxs("li",{className:"search-item",children:[y.jsx("span",{className:"item-lable",style:{width:"80px"},children:"选择场地:"}),y.jsx(I,{placeholder:"请选择场地",allowClear:!0,style:{width:"150px"},onChange:e=>{u({stationuuid:e})},value:d.stationuuid,options:D})]}),y.jsxs("li",{className:"search-item",children:[y.jsx("span",{className:"item-lable",style:{width:"80px"},children:"运营模式:"}),y.jsx(I,{placeholder:"请选择模式",allowClear:!0,style:{width:"150px"},options:[{value:"普通模式",label:"普通模式"}]})]}),y.jsx("li",{className:"search-item",style:{width:"450px"},children:y.jsx(H,{style:{width:"280px",marginLeft:20},onChange:e=>{u(e?{startTime:k(e[0]).format("YYYY-MM-DD"),endTime:k(e[1]).format("YYYY-MM-DD")}:{startTime:"",endTime:""})}})}),t.includes("record:search")&&y.jsx("li",{children:y.jsx(g,{type:"primary",icon:y.jsx(K,{}),onClick:()=>{m(l)},children:"搜索"})})]})}),y.jsx("div",{className:"diy-table",children:y.jsx(C,{columns:Y,loading:r,dataSource:U,pagination:{total:l.total,current:l.pageNum,pageSize:l.pageSize,showQuickJumper:!1,showTotal:e=>`共 ${e} 条数据`,onChange:(e,t)=>((e,t)=>{m({pageNum:e,pageSize:t||l.pageSize})})(e,t)}})}),y.jsx(q,{onClose:()=>{R(!1)},open:z,placement:"bottom",closeIcon:!1,children:y.jsx(C,{columns:[{title:"队伍",dataIndex:"ranks",key:"ranks"},{title:"用户昵称",dataIndex:"username",key:"username"},{title:"得分",dataIndex:"score",key:"score"},{title:"失分",dataIndex:"losing",key:"losing"},{title:"护盾",dataIndex:"shield",key:"shield"},{title:"跑动距离",dataIndex:"running",key:"running"},{title:"卡路里",dataIndex:"calorie",key:"calorie"},{title:"命中数",dataIndex:"hitNum",key:"hitNum"},{title:"防御次数",dataIndex:"defenseNum",key:"defenseNum"},{title:"表现分",dataIndex:"perScore",key:"perScore"}],loading:r,dataSource:A,pagination:!1})})]})}export{$ as default};
