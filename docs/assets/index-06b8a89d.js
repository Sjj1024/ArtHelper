import{r as e,x as t,y as n,ao as r,an as a,Q as i,s as u,f as c,_ as o,as as s,N as l,g as f,q as d,z as m,F as v,a9 as p,K as g,C as h,v as N,ak as b,D as S,aj as y,al as E,b2 as w}from"./index-efa3a32c.js";import{c as I,f as x}from"./context-cb88fb1e.js";import{g as k,a as M}from"./statusUtils-b010cbea.js";const C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};var R=function(r,a){return e.createElement(t,n(n({},r),{},{ref:a,icon:C}))};const D=e.forwardRef(R);function T(){return"function"==typeof BigInt}function O(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),(t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(t="0".concat(t));var r=t||"0",a=r.split("."),i=a[0]||"0",u=a[1]||"0";"0"===i&&"0"===u&&(n=!1);var c=n?"-":"";return{negative:n,negativeStr:c,trimStr:r,integerStr:i,decimalStr:u,fullStr:"".concat(c).concat(r)}}function _(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function F(e){var t=String(e);if(_(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return(null==r?void 0:r[1])&&(n+=r[1].length),n}return t.includes(".")&&B(t)?t.length-t.indexOf(".")-1:0}function A(e){var t=String(e);if(_(e)){if(e>Number.MAX_SAFE_INTEGER)return String(T()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(T()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(F(t))}return O(t).fullStr}function B(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}function q(e){var t="number"==typeof e?A(e):O(e).fullStr;return t.includes(".")?O(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}var j=function(){function e(t){a(this,e),this.origin="",this.number=void 0,this.empty=void 0,(t||0===t)&&String(t).trim()?(this.origin=String(t),this.number=Number(t)):this.empty=!0}return r(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=Number(t);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var a=Math.max(F(this.number),F(n));return new e(r.toFixed(a))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":A(this.number):this.origin}}]),e}(),P=function(){function e(t){if(a(this,e),this.origin="",this.negative=void 0,this.integer=void 0,this.decimal=void 0,this.decimalLen=void 0,this.empty=void 0,this.nan=void 0,(t||0===t)&&String(t).trim())if(this.origin=String(t),"-"!==t){var n=t;if(_(n)&&(n=Number(n)),B(n="string"==typeof n?n:A(n))){var r=O(n);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var u=i[1]||"0";this.decimal=BigInt(u),this.decimalLen=u.length}else this.nan=!0}else this.nan=!0;else this.empty=!0}return r(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=new e(t);if(n.isInvalidate())return this;var r=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),a=O((this.alignDecimal(r)+n.alignDecimal(r)).toString()),i=a.negativeStr,u=a.trimStr,c="".concat(i).concat(u.padStart(r+1,"0"));return new e("".concat(c.slice(0,-r),".").concat(c.slice(-r)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":O("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}();function G(e){return T()?new P(e):new j(e)}function $(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";var a=O(e),i=a.negativeStr,u=a.integerStr,c=a.decimalStr,o="".concat(t).concat(c),s="".concat(i).concat(u);if(n>=0){var l=Number(c[n]);return l>=5&&!r?$(G(e).add("".concat(i,"0.").concat("0".repeat(n)).concat(10-l)).toString(),t,n,r):0===n?s:"".concat(s).concat(t).concat(c.padEnd(n,"0").slice(0,n))}return".0"===o?s:"".concat(s).concat(o)}function H(t){var n=t.prefixCls,r=t.upNode,a=t.downNode,s=t.upDisabled,l=t.downDisabled,f=t.onStep,d=e.useRef(),m=e.useRef();m.current=f;var v=function(e,t){e.preventDefault(),m.current(t),d.current=setTimeout((function e(){m.current(t),d.current=setTimeout(e,200)}),600)},p=function(){clearTimeout(d.current)};if(e.useEffect((function(){return p}),[]),i())return null;var g="".concat(n,"-handler"),h=u(g,"".concat(g,"-up"),c({},"".concat(g,"-up-disabled"),s)),N=u(g,"".concat(g,"-down"),c({},"".concat(g,"-down-disabled"),l)),b={unselectable:"on",role:"button",onMouseUp:p,onMouseLeave:p};return e.createElement("div",{className:"".concat(g,"-wrap")},e.createElement("span",o({},b,{onMouseDown:function(e){v(e,!0)},"aria-label":"Increase Value","aria-disabled":s,className:h}),r||e.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-up-inner")})),e.createElement("span",o({},b,{onMouseDown:function(e){v(e,!1)},"aria-label":"Decrease Value","aria-disabled":l,className:N}),a||e.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-down-inner")})))}var L=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","controls","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep"],U=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},z=function(e){var t=G(e);return t.isInvalidate()?null:t},W=e.forwardRef((function(t,n){var r,a=t.prefixCls,i=void 0===a?"rc-input-number":a,h=t.className,N=t.style,b=t.min,S=t.max,y=t.step,E=void 0===y?1:y,w=t.defaultValue,I=t.value,x=t.disabled,k=t.readOnly,M=t.upHandler,C=t.downHandler,R=t.keyboard,D=t.controls,T=void 0===D||D,O=t.stringMode,_=t.parser,j=t.formatter,P=t.precision,W=t.decimalSeparator,K=t.onChange,V=t.onInput,X=t.onPressEnter,Q=t.onStep,J=f(t,L),Y="".concat(i,"-input"),Z=e.useRef(null),ee=e.useState(!1),te=d(ee,2),ne=te[0],re=te[1],ae=e.useRef(!1),ie=e.useRef(!1),ue=e.useRef(!1),ce=e.useState((function(){return G(null!=I?I:w)})),oe=d(ce,2),se=oe[0],le=oe[1];var fe=e.useCallback((function(e,t){if(!t)return P>=0?P:Math.max(F(e),F(E))}),[P,E]),de=e.useCallback((function(e){var t=String(e);if(_)return _(t);var n=t;return W&&(n=n.replace(W,".")),n.replace(/[^\w.-]+/g,"")}),[_,W]),me=e.useRef(""),ve=e.useCallback((function(e,t){if(j)return j(e,{userTyping:t,input:String(me.current)});var n="number"==typeof e?A(e):e;if(!t){var r=fe(n,t);if(B(n)&&(W||r>=0))n=$(n,W||".",r)}return n}),[j,fe,W]),pe=e.useState((function(){var e=null!=w?w:I;return se.isInvalidate()&&["string","number"].includes(m(e))?Number.isNaN(e)?"":e:ve(se.toString(),!1)})),ge=d(pe,2),he=ge[0],Ne=ge[1];function be(e,t){Ne(ve(e.isInvalidate()?e.toString(!1):e.toString(!t),t))}me.current=he;var Se,ye,Ee,we,Ie,xe=e.useMemo((function(){return z(S)}),[S,P]),ke=e.useMemo((function(){return z(b)}),[b,P]),Me=e.useMemo((function(){return!(!xe||!se||se.isInvalidate())&&xe.lessEquals(se)}),[xe,se]),Ce=e.useMemo((function(){return!(!ke||!se||se.isInvalidate())&&se.lessEquals(ke)}),[ke,se]),Re=(Se=Z.current,ye=ne,Ee=e.useRef(null),[function(){try{var e=Se.selectionStart,t=Se.selectionEnd,n=Se.value,r=n.substring(0,e),a=n.substring(t);Ee.current={start:e,end:t,value:n,beforeTxt:r,afterTxt:a}}catch(i){}},function(){if(Se&&Ee.current&&ye)try{var e=Se.value,t=Ee.current,n=t.beforeTxt,r=t.afterTxt,a=t.start,i=e.length;if(e.endsWith(r))i=e.length-Ee.current.afterTxt.length;else if(e.startsWith(n))i=n.length;else{var u=n[a-1],c=e.indexOf(u,a-1);-1!==c&&(i=c+1)}Se.setSelectionRange(i,i)}catch(o){s(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(o.message))}}]),De=d(Re,2),Te=De[0],Oe=De[1],_e=function(e){return xe&&!e.lessEquals(xe)?xe:ke&&!ke.lessEquals(e)?ke:null},Fe=function(e){return!_e(e)},Ae=function(e,t){var n,r=e,a=Fe(r)||r.isEmpty();if(r.isEmpty()||t||(r=_e(r)||r,a=!0),!k&&!x&&a){var i=r.toString(),u=fe(i,t);return u>=0&&(r=G($(i,".",u)),Fe(r)||(r=G($(i,".",u,!0)))),r.equals(se)||(n=r,void 0===I&&le(n),null==K||K(r.isEmpty()?null:U(O,r)),void 0===I&&be(r,t)),r}return se},Be=(we=e.useRef(0),Ie=function(){l.cancel(we.current)},e.useEffect((function(){return Ie}),[]),function(e){Ie(),we.current=l((function(){e()}))}),qe=function e(t){if(Te(),Ne(t),!ie.current){var n=G(de(t));n.isNaN()||Ae(n,!0)}null==V||V(t),Be((function(){var n=t;_||(n=t.replace(/。/g,".")),n!==t&&e(n)}))},je=function(e){var t;if(!(e&&Me||!e&&Ce)){ae.current=!1;var n=G(ue.current?q(E):E);e||(n=n.negate());var r=(se||G(0)).add(n.toString()),a=Ae(r,!1);null==Q||Q(U(O,a),{offset:ue.current?q(E):E,type:e?"up":"down"}),null===(t=Z.current)||void 0===t||t.focus()}},Pe=function(e){var t=G(de(he)),n=t;n=t.isNaN()?se:Ae(t,e),void 0!==I?be(se,!1):n.isNaN()||be(n,!1)};return v((function(){se.isInvalidate()||be(se,!1)}),[P]),v((function(){var e=G(I);le(e);var t=G(de(he));e.equals(t)&&ae.current&&!j||be(e,ae.current)}),[I]),v((function(){j&&Oe()}),[he]),e.createElement("div",{className:u(i,h,(r={},c(r,"".concat(i,"-focused"),ne),c(r,"".concat(i,"-disabled"),x),c(r,"".concat(i,"-readonly"),k),c(r,"".concat(i,"-not-a-number"),se.isNaN()),c(r,"".concat(i,"-out-of-range"),!se.isInvalidate()&&!Fe(se)),r)),style:N,onFocus:function(){re(!0)},onBlur:function(){Pe(!1),re(!1),ae.current=!1},onKeyDown:function(e){var t=e.which,n=e.shiftKey;ae.current=!0,ue.current=!!n,t===g.ENTER&&(ie.current||(ae.current=!1),Pe(!1),null==X||X(e)),!1!==R&&!ie.current&&[g.UP,g.DOWN].includes(t)&&(je(g.UP===t),e.preventDefault())},onKeyUp:function(){ae.current=!1,ue.current=!1},onCompositionStart:function(){ie.current=!0},onCompositionEnd:function(){ie.current=!1,qe(Z.current.value)},onBeforeInput:function(){ae.current=!0}},T&&e.createElement(H,{prefixCls:i,upNode:M,downNode:C,upDisabled:Me,downDisabled:Ce,onStep:je}),e.createElement("div",{className:"".concat(Y,"-wrap")},e.createElement("input",o({autoComplete:"off",role:"spinbutton","aria-valuemin":b,"aria-valuemax":S,"aria-valuenow":se.isInvalidate()?null:se.toString(),step:E},J,{ref:p(Z,n),className:Y,value:he,onChange:function(e){qe(e.target.value)},disabled:x,readOnly:k}))))}));W.displayName="InputNumber";var K=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const V=e.forwardRef((function(t,n){var r=e.useContext(h),a=r.getPrefixCls,i=r.direction,s=e.useContext(N),l=e.useState(!1),f=d(l,2),v=f[0],p=f[1],g=e.useRef(null);e.useImperativeHandle(n,(function(){return g.current}));var C=t.className,R=t.size,T=t.disabled,O=t.prefixCls,_=t.addonBefore,F=t.addonAfter,A=t.prefix,B=t.bordered,q=void 0===B||B,j=t.readOnly,P=t.status,G=t.controls,$=K(t,["className","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls"]),H=a("input-number",O),L=b(H,i),U=L.compactSize,z=L.compactItemClassnames,V=e.createElement(D,{className:"".concat(H,"-handler-up-inner")}),X=e.createElement(w,{className:"".concat(H,"-handler-down-inner")}),Q="boolean"==typeof G?G:void 0;"object"===m(G)&&(V=void 0===G.upIcon?V:e.createElement("span",{className:"".concat(H,"-handler-up-inner")},G.upIcon),X=void 0===G.downIcon?X:e.createElement("span",{className:"".concat(H,"-handler-down-inner")},G.downIcon));var J=e.useContext(I),Y=J.hasFeedback,Z=J.status,ee=J.isFormItemInput,te=J.feedbackIcon,ne=M(Z,P),re=U||R||s,ae=e.useContext(S),ie=null!=T?T:ae,ue=u(c(c(c(c(c({},"".concat(H,"-lg"),"large"===re),"".concat(H,"-sm"),"small"===re),"".concat(H,"-rtl"),"rtl"===i),"".concat(H,"-borderless"),!q),"".concat(H,"-in-form-item"),ee),k(H,ne),z,C),ce=e.createElement(W,o({ref:g,disabled:ie,className:ue,upHandler:V,downHandler:X,prefixCls:H,readOnly:j,controls:Q},$));if(null!=A||Y){var oe=u("".concat(H,"-affix-wrapper"),k("".concat(H,"-affix-wrapper"),ne,Y),c(c(c(c(c(c(c(c({},"".concat(H,"-affix-wrapper-focused"),v),"".concat(H,"-affix-wrapper-disabled"),t.disabled),"".concat(H,"-affix-wrapper-sm"),"small"===s),"".concat(H,"-affix-wrapper-lg"),"large"===s),"".concat(H,"-affix-wrapper-rtl"),"rtl"===i),"".concat(H,"-affix-wrapper-readonly"),j),"".concat(H,"-affix-wrapper-borderless"),!q),"".concat(C),!(_||F)&&C));ce=e.createElement("div",{className:oe,style:t.style,onMouseUp:function(){return g.current.focus()}},A&&e.createElement("span",{className:"".concat(H,"-prefix")},A),y(ce,{style:null,value:t.value,onFocus:function(e){var n;p(!0),null===(n=t.onFocus)||void 0===n||n.call(t,e)},onBlur:function(e){var n;p(!1),null===(n=t.onBlur)||void 0===n||n.call(t,e)}}),Y&&e.createElement("span",{className:"".concat(H,"-suffix")},te))}if(null!=_||null!=F){var se="".concat(H,"-group"),le="".concat(se,"-addon"),fe=_?e.createElement("div",{className:le},_):null,de=F?e.createElement("div",{className:le},F):null,me=u("".concat(H,"-wrapper"),se,c({},"".concat(se,"-rtl"),"rtl"===i)),ve=u("".concat(H,"-group-wrapper"),c(c(c({},"".concat(H,"-group-wrapper-sm"),"small"===s),"".concat(H,"-group-wrapper-lg"),"large"===s),"".concat(H,"-group-wrapper-rtl"),"rtl"===i),k("".concat(H,"-group-wrapper"),ne,Y),C);ce=e.createElement("div",{className:ve,style:t.style},e.createElement("div",{className:me},fe&&e.createElement(E,null,e.createElement(x,{status:!0,override:!0},fe)),y(ce,{style:null,disabled:ie}),de&&e.createElement(E,null,e.createElement(x,{status:!0,override:!0},de))))}return ce}));export{V as I};
