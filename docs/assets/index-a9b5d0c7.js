import{r as e,A as t,_ as s,u as i,d as a,j as o,m as n,T as r}from"./index-efa3a32c.js";import{a as l}from"./index-639ffc53.js";import"./index-0373e759.js";/* empty css              */import"./index-8c8b720f.js";import"./index-9b480cfe.js";import"./index-9b8a3313.js";import{D as c}from"./index-65748fb5.js";import{h as d}from"./hado-a6960cf0.js";import{E as m}from"./EditOutlined-e081177a.js";import"./pickAttrs-1cd23dfa.js";import"./index-40784afc.js";import"./getScrollBarSize-c6833c2b.js";import"./index-1c1deade.js";import"./context-cb88fb1e.js";import"./statusUtils-b010cbea.js";import"./CheckOutlined-f0d55485.js";import"./SearchOutlined-03c63d28.js";import"./isEqual-8ee5b3ce.js";import"./useForceUpdate-9ad39bdf.js";import"./index-0a1440ec.js";import"./index-177532f7.js";import"./EyeOutlined-319494bf.js";import"./responsiveObserve-b13564d4.js";const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm144 452H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm445.7 51.5l-93.3-93.3C814.7 780.7 828 743.9 828 704c0-97.2-78.8-176-176-176s-176 78.8-176 176 78.8 176 176 176c35.8 0 69-10.7 96.8-29l94.7 94.7c1.6 1.6 3.6 2.3 5.6 2.3s4.1-.8 5.6-2.3l31-31a7.9 7.9 0 000-11.2zM652 816c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"file-search",theme:"outlined"};var j=function(i,a){return e.createElement(t,s({},i,{ref:a,icon:p}))};const u=e.forwardRef(j);function h(){document.title="游戏配置";const t=i(),s=a((e=>e.app.powersCode)),[p,j]=e.useState([]),[h,x]=e.useState(!1),y=(e,s)=>{t("detail"===s?`/game/detail?id=${e.key}&title=${e.tableName}`:`/game/log?id=${e.key}`)},f=[{title:"编号",dataIndex:"serial",key:"serial"},{title:"配置表名",dataIndex:"tableName",key:"teacherName"},{title:"上次同步",dataIndex:"lastSync",key:"lastSync"},{title:"同步时间",dataIndex:"syncTime",key:"syncTime"},{title:"操作",key:"control",width:200,render:(e,t)=>{const i=[];s.includes("hado:log")&&i.push(o.jsx("span",{className:"control-btn blue",onClick:()=>y(t,"log"),children:o.jsx(r,{placement:"top",title:"查看日志",children:o.jsx(u,{})})},"1")),s.includes("hado:detail")&&i.push(o.jsx("span",{className:"control-btn blue",onClick:()=>y(t,"detail"),children:o.jsx(r,{placement:"top",title:"详情",children:o.jsx(m,{})})},"2"));const a=[];return i.forEach(((e,t)=>{t&&a.push(o.jsx(c,{type:"vertical"},`line${t}`)),a.push(e)})),a}}],v=e.useMemo((()=>p.map(((e,t)=>({key:e.id,serial:e.id,tableName:e.tablename,lastSync:e.lastuser,syncTime:e.synctime})))),[p]);return e.useEffect((()=>{(async()=>{x(!0);try{const e=await d.hadoWorld();e&&200===e.code?j(e.data):n.error((null==e?void 0:e.message)??"获取失败")}finally{x(!1)}})()}),[]),o.jsx("div",{className:"store-list-box",children:o.jsx("div",{className:"diy-table",children:o.jsx(l,{columns:f,loading:h,dataSource:v,pagination:!1})})})}export{h as default};
