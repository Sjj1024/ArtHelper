import{r as e,z as t,g as n,q as r,p as o,_ as a,s as i,f as s,E as c,N as l,y as u,K as f,aX as m,R as d,x as v,Y as p,b5 as g,b6 as h,C as w,U as C,ab as y}from"./index-efa3a32c.js";import{E as b}from"./EyeOutlined-319494bf.js";import{g as E,b as x}from"./index-639ffc53.js";import{D as N}from"./index-46e73bcd.js";import{P}from"./Portal-08554165.js";var k=["visible","onVisibleChange","getContainer","current","countRender"],S=e.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}},rootClassName:""}),R=S.Provider,z=function(t){var n,r=t.visible,o=t.maskTransitionName,a=t.getContainer,l=t.prefixCls,u=t.rootClassName,f=t.icons,m=t.countRender,d=t.showSwitch,v=t.showProgress,p=t.current,g=t.count,h=t.scale,w=t.onSwitchLeft,C=t.onSwitchRight,y=t.onClose,b=t.onZoomIn,E=t.onZoomOut,x=t.onRotateRight,N=t.onRotateLeft,k=f.rotateLeft,S=f.rotateRight,R=f.zoomIn,z=f.zoomOut,O=f.close,M=f.left,T=f.right,j="".concat(l,"-operations-operation"),I="".concat(l,"-operations-icon"),L=[{icon:O,onClick:y,type:"close"},{icon:R,onClick:b,type:"zoomIn",disabled:50===h},{icon:z,onClick:E,type:"zoomOut",disabled:1===h},{icon:S,onClick:x,type:"rotateRight"},{icon:k,onClick:N,type:"rotateLeft"}],Y=e.createElement(e.Fragment,null,d&&e.createElement(e.Fragment,null,e.createElement("div",{className:i("".concat(l,"-switch-left"),s({},"".concat(l,"-switch-left-disabled"),0===p)),onClick:w},M),e.createElement("div",{className:i("".concat(l,"-switch-right"),s({},"".concat(l,"-switch-right-disabled"),p===g-1)),onClick:C},T)),e.createElement("ul",{className:"".concat(l,"-operations")},v&&e.createElement("li",{className:"".concat(l,"-operations-progress")},null!==(n=null==m?void 0:m(p+1,g))&&void 0!==n?n:"".concat(p+1," / ").concat(g)),L.map((function(t){var n,r=t.icon,o=t.onClick,a=t.type,c=t.disabled;return e.createElement("li",{className:i(j,(n={},s(n,"".concat(l,"-operations-operation-").concat(a),!0),s(n,"".concat(l,"-operations-operation-disabled"),!!c),n)),onClick:o,key:a},e.isValidElement(r)?e.cloneElement(r,{className:I}):r)}))));return e.createElement(c,{visible:r,motionName:o},(function(t){var n=t.className,r=t.style;return e.createElement(P,{open:!0,getContainer:null!=a?a:document.body},e.createElement("div",{className:i("".concat(l,"-operations-wrapper"),n,u),style:r},Y))}))},O={x:0,y:0,rotate:0,scale:1};function M(e,t,n,r){var o=t+n,a=(n-r)/2;if(n>r){if(t>0)return s({},e,a);if(t<0&&o<r)return s({},e,-a)}else if(t<0||o>r)return s({},e,t<0?a:-a);return{}}var T=["prefixCls","src","alt","onClose","afterClose","visible","icons","rootClassName","getContainer","countRender","scaleStep","transitionName","maskTransitionName"],j=function(t){var o=t.prefixCls,c=t.src,v=t.alt,p=t.onClose;t.afterClose;var g=t.visible,h=t.icons,w=void 0===h?{}:h,C=t.rootClassName,y=t.getContainer,b=t.countRender,x=t.scaleStep,P=void 0===x?.5:x,k=t.transitionName,R=void 0===k?"zoom":k,j=t.maskTransitionName,I=void 0===j?"fade":j,L=n(t,T),Y=e.useRef(),H=e.useRef({deltaX:0,deltaY:0,transformX:0,transformY:0}),V=e.useState(!1),X=r(V,2),G=X[0],D=X[1],U=e.useContext(S),Z=U.previewUrls,B=U.current,F=U.isPreviewGroup,W=U.setCurrent,_=Z.size,A=Array.from(Z.keys()),q=A.indexOf(B),K=F?Z.get(B):c,J=F&&_>1,Q=F&&_>=1,$=function(t){var n=e.useRef(null),o=e.useRef([]),a=e.useState(O),i=r(a,2),s=i[0],c=i[1],f=function(e){null===n.current&&(o.current=[],n.current=l((function(){c((function(e){var t=e;return o.current.forEach((function(e){t=u(u({},t),e)})),n.current=null,t}))}))),o.current.push(u(u({},s),e))};return{transform:s,resetTransform:function(){c(O)},updateTransform:f,dispatchZoonChange:function(e,n,r){var o=t.current,a=o.width,i=o.height,c=o.offsetWidth,l=o.offsetHeight,u=o.offsetLeft,m=o.offsetTop,d=e,v=s.scale*e;v>50?(d=50/s.scale,v=50):v<1&&(d=1/s.scale,v=1);var p=null!=n?n:innerWidth/2,g=null!=r?r:innerHeight/2,h=d-1,w=h*a*.5,C=h*i*.5,y=h*(p-s.x-u),b=h*(g-s.y-m),x=s.x-(y-w),N=s.y-(b-C);if(e<1&&1===v){var P=c*v,k=l*v,S=E(),R=S.width,z=S.height;P<=R&&k<=z&&(x=0,N=0)}f({x:x,y:N,scale:v})}}}(Y),ee=$.transform,te=$.resetTransform,ne=$.updateTransform,re=$.dispatchZoonChange,oe=ee.rotate,ae=ee.scale,ie=i(s({},"".concat(o,"-moving"),G)),se=function(){if(g&&G){D(!1);var e=H.current,t=e.transformX,n=e.transformY;if(!(ee.x!==t&&ee.y!==n))return;var r=Y.current.offsetWidth*ae,o=Y.current.offsetHeight*ae,a=Y.current.getBoundingClientRect(),i=a.left,s=a.top,c=oe%180!=0,l=function(e,t,n,r){var o=E(),a=o.width,i=o.height,s=null;return e<=a&&t<=i?s={x:0,y:0}:(e>a||t>i)&&(s=u(u({},M("x",n,e,a)),M("y",r,t,i))),s}(c?o:r,c?r:o,i,s);l&&ne(u({},l))}},ce=function(e){g&&G&&ne({x:e.pageX-H.current.deltaX,y:e.pageY-H.current.deltaY})},le=e.useCallback((function(e){g&&J&&(e.keyCode===f.LEFT?q>0&&W(A[q-1]):e.keyCode===f.RIGHT&&q<_-1&&W(A[q+1]))}),[q,_,A,W,J,g]);return e.useEffect((function(){var e,t,n=m(window,"mouseup",se,!1),r=m(window,"mousemove",ce,!1),o=m(window,"keydown",le,!1);try{window.top!==window.self&&(e=m(window.top,"mouseup",se,!1),t=m(window.top,"mousemove",ce,!1))}catch(a){}return function(){var a,i;n.remove(),r.remove(),o.remove(),null===(a=e)||void 0===a||a.remove(),null===(i=t)||void 0===i||i.remove()}}),[g,G,le]),d.createElement(d.Fragment,null,d.createElement(N,a({transitionName:R,maskTransitionName:I,closable:!1,keyboard:!0,prefixCls:o,onClose:p,afterClose:function(){te()},visible:g,wrapClassName:ie,rootClassName:C,getContainer:y},L),d.createElement("div",{className:"".concat(o,"-img-wrapper")},d.createElement("img",{width:t.width,height:t.height,onWheel:function(e){if(g&&0!=e.deltaY){var t=Math.abs(e.deltaY/100),n=1+Math.min(t,.2)*P;e.deltaY>0&&(n=1/n),re(n,e.clientX,e.clientY)}},onMouseDown:function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),H.current={deltaX:e.pageX-ee.x,deltaY:e.pageY-ee.y,transformX:ee.x,transformY:ee.y},D(!0))},onDoubleClick:function(e){g&&(1!==ae?ne({x:0,y:0,scale:1}):re(1+P,e.clientX,e.clientY))},ref:Y,className:"".concat(o,"-img"),src:K,alt:v,style:{transform:"translate3d(".concat(ee.x,"px, ").concat(ee.y,"px, 0) scale3d(").concat(ae,", ").concat(ae,", 1) rotate(").concat(oe,"deg)")}}))),d.createElement(z,{visible:g,maskTransitionName:I,getContainer:y,prefixCls:o,rootClassName:C,icons:w,countRender:b,showSwitch:J,showProgress:Q,current:q,count:_,scale:ae,onSwitchLeft:function(e){e.preventDefault(),e.stopPropagation(),q>0&&W(A[q-1])},onSwitchRight:function(e){e.preventDefault(),e.stopPropagation(),q<_-1&&W(A[q+1])},onZoomIn:function(){re(1+P)},onZoomOut:function(){re(1-P)},onRotateRight:function(){ne({rotate:oe+90})},onRotateLeft:function(){ne({rotate:oe-90})},onClose:p}))},I=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable"],L=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons","scaleStep"],Y=0,H=function(c){var l,f=c.src,m=c.alt,d=c.onPreviewClose,v=c.prefixCls,p=void 0===v?"rc-image":v,g=c.previewPrefixCls,h=void 0===g?"".concat(p,"-preview"):g,w=c.placeholder,C=c.fallback,y=c.width,b=c.height,E=c.style,N=c.preview,P=void 0===N||N,k=c.className,R=c.onClick,z=c.onError,O=c.wrapperClassName,M=c.wrapperStyle,T=c.rootClassName,H=c.crossOrigin,V=c.decoding,X=c.loading,G=c.referrerPolicy,D=c.sizes,U=c.srcSet,Z=c.useMap,B=c.draggable,F=n(c,I),W=w&&!0!==w,_="object"===t(P)?P:{},A=_.src,q=_.visible,K=void 0===q?void 0:q,J=_.onVisibleChange,Q=void 0===J?d:J,$=_.getContainer,ee=void 0===$?void 0:$,te=_.mask,ne=_.maskClassName,re=_.icons,oe=_.scaleStep,ae=n(_,L),ie=null!=A?A:f,se=void 0!==K,ce=o(!!K,{value:K,onChange:Q}),le=r(ce,2),ue=le[0],fe=le[1],me=e.useState(W?"loading":"normal"),de=r(me,2),ve=de[0],pe=de[1],ge=e.useState(null),he=r(ge,2),we=he[0],Ce=he[1],ye="error"===ve,be=e.useContext(S),Ee=be.isPreviewGroup,xe=be.setCurrent,Ne=be.setShowPreview,Pe=be.setMousePosition,ke=be.registerImage,Se=e.useState((function(){return Y+=1})),Re=r(Se,1)[0],ze=!!P,Oe=e.useRef(!1),Me=function(){pe("normal")};e.useEffect((function(){return ke(Re,ie)}),[]),e.useEffect((function(){ke(Re,ie,ze)}),[ie,ze]),e.useEffect((function(){ye&&pe("normal"),W&&!Oe.current&&pe("loading")}),[f]);var Te=i(p,O,T,s({},"".concat(p,"-error"),ye)),je=ye&&C?C:ie,Ie={crossOrigin:H,decoding:V,draggable:B,loading:X,referrerPolicy:G,sizes:D,srcSet:U,useMap:Z,alt:m,className:i("".concat(p,"-img"),s({},"".concat(p,"-img-placeholder"),!0===w),k),style:u({height:b},E)};return e.createElement(e.Fragment,null,e.createElement("div",a({},F,{className:Te,onClick:ze?function(e){if(!se){var t=x(e.target),n=t.left,r=t.top;Ee?(xe(Re),Pe({x:n,y:r})):Ce({x:n,y:r})}Ee?Ne(!0):fe(!0),R&&R(e)}:R,style:u({width:y,height:b},M)}),e.createElement("img",a({},Ie,{ref:function(e){Oe.current=!1,"loading"===ve&&null!=e&&e.complete&&(e.naturalWidth||e.naturalHeight)&&(Oe.current=!0,Me())}},ye&&C?{src:C}:{onLoad:Me,onError:function(e){z&&z(e),pe("error")},src:f},{width:y,height:b})),"loading"===ve&&e.createElement("div",{"aria-hidden":"true",className:"".concat(p,"-placeholder")},w),te&&ze&&e.createElement("div",{className:i("".concat(p,"-mask"),ne),style:{display:"none"===(null===(l=Ie.style)||void 0===l?void 0:l.display)?"none":void 0}},te)),!Ee&&ze&&e.createElement(j,a({"aria-hidden":!ue,visible:ue,prefixCls:h,onClose:function(e){e.stopPropagation(),fe(!1),se||Ce(null)},mousePosition:we,src:je,alt:m,getContainer:ee,icons:re,scaleStep:oe,rootClassName:T},ae)))};H.PreviewGroup=function(i){var s=i.previewPrefixCls,c=void 0===s?"rc-image-preview":s,l=i.children,u=i.icons,f=void 0===u?{}:u,m=i.preview,d="object"===t(m)?m:{},v=d.visible,p=void 0===v?void 0:v,g=d.onVisibleChange,h=void 0===g?void 0:g,w=d.getContainer,C=void 0===w?void 0:w,y=d.current,b=void 0===y?0:y,E=d.countRender,x=void 0===E?void 0:E,N=n(d,k),P=e.useState(new Map),S=r(P,2),z=S[0],O=S[1],M=e.useState(),T=r(M,2),I=T[0],L=T[1],Y=o(!!p,{value:p,onChange:h}),H=r(Y,2),V=H[0],X=H[1],G=e.useState(null),D=r(G,2),U=D[0],Z=D[1],B=void 0!==p,F=Array.from(z.keys())[b],W=new Map(Array.from(z).filter((function(e){return!!r(e,2)[1].canPreview})).map((function(e){var t=r(e,2);return[t[0],t[1].url]})));return e.useEffect((function(){L(F)}),[F]),e.useEffect((function(){!V&&B&&L(F)}),[F,B,V]),e.createElement(R,{value:{isPreviewGroup:!0,previewUrls:W,setPreviewUrls:O,current:I,setCurrent:L,setShowPreview:X,setMousePosition:Z,registerImage:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return O((function(r){return new Map(r).set(e,{url:t,canPreview:n})})),function(){O((function(t){var n=new Map(t);return n.delete(e)?n:t}))}}}},l,e.createElement(j,a({"aria-hidden":!V,visible:V,prefixCls:c,onClose:function(e){e.stopPropagation(),X(!1),Z(null)},mousePosition:U,src:W.get(I),icons:f,getContainer:C,countRender:x},N)))},H.displayName="Image";const V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};var X=function(t,n){return e.createElement(v,u(u({},t),{},{ref:n,icon:V}))};const G=e.forwardRef(X);const D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};var U=function(t,n){return e.createElement(v,u(u({},t),{},{ref:n,icon:D}))};const Z=e.forwardRef(U);const B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};var F=function(t,n){return e.createElement(v,u(u({},t),{},{ref:n,icon:B}))};const W=e.forwardRef(F);const _={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};var A=function(t,n){return e.createElement(v,u(u({},t),{},{ref:n,icon:_}))};const q=e.forwardRef(A);var K=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},J={rotateLeft:e.createElement(G,null),rotateRight:e.createElement(Z,null),zoomIn:e.createElement(W,null),zoomOut:e.createElement(q,null),close:e.createElement(p,null),left:e.createElement(g,null),right:e.createElement(h,null)};const Q=function(n){var r=n.previewPrefixCls,o=n.preview,i=K(n,["previewPrefixCls","preview"]),s=e.useContext(w).getPrefixCls,c=s("image-preview",r),l=s(),u=e.useMemo((function(){if(!1===o)return o;var e="object"===t(o)?o:{};return a(a({},e),{transitionName:C(l,"zoom",e.transitionName),maskTransitionName:C(l,"fade",e.maskTransitionName)})}),[o]);return e.createElement(H.PreviewGroup,a({preview:u,previewPrefixCls:c,icons:J},i))};var $=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ee=function(n){var r=n.prefixCls,o=n.preview,i=$(n,["prefixCls","preview"]),s=e.useContext(w),c=s.getPrefixCls,l=s.locale,u=void 0===l?y:l,f=s.getPopupContainer,m=c("image",r),d=c(),v=u.Image||y.Image,p=e.useMemo((function(){if(!1===o)return o;var n="object"===t(o)?o:{},r=n.getContainer,i=$(n,["getContainer"]);return a(a({mask:e.createElement("div",{className:"".concat(m,"-mask-info")},e.createElement(b,null),null==v?void 0:v.preview),icons:J},i),{getContainer:r||f,transitionName:C(d,"zoom",n.transitionName),maskTransitionName:C(d,"fade",n.maskTransitionName)})}),[o,v]);return e.createElement(H,a({prefixCls:m,preview:p},i))};ee.PreviewGroup=Q;const te=ee;export{te as I};
