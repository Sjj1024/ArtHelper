import{r as t,u as e,o as r,j as s,B as i,m as a}from"./index-efa3a32c.js";import{D as n}from"./index-1acfbbfd.js";import"./index-47693ae2.js";import{t as d}from"./teacher-ae538df4.js";import{u as l}from"./useSetState-78ffd672.js";import"./CalendarOutlined-8ff6678f.js";import"./context-cb88fb1e.js";import"./statusUtils-b010cbea.js";const o=t=>0===t?"":6===t?"冻结":"缺勤",c=t=>5===t?"#fff":"#000",h=()=>{document.title="教练日程";const[h,x]=t.useState([]),u=e();let[p,m]=r();const g=p.get("teacher"),[j,y]=t.useState(null);t.useState([]);const[f,w]=t.useState(!1),k=t=>`星期${["","一","二","三","四","五","六","日"][t]}`,v=new Date,S=v.getFullYear(),b=v.getMonth()+1,C=v.getDate(),[T,A]=l({time:S+"-"+(b<10?"0"+b:b)+"-"+(C<10?"0"+C:C),coachuuid:g});return t.useEffect((()=>{(async t=>{const e={time:t.time,coachuuid:t.coachuuid};w(!0);try{const t=await d.getTeacherWork(e);t&&200===t.code?x(t.data):a.error((null==t?void 0:t.message)??"获取失败")}finally{w(!1)}})(T)}),[T]),s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsx(n,{onChange:(t,e)=>{y(t)},style:{width:"300px"}}),s.jsxs("span",{style:{float:"right"},children:[s.jsx(i,{type:"primary",onClick:()=>{if(j){(async()=>{const t={time:j,coachuuid:T.coachuuid};w(!0);try{const e=await d.getTeacherWork(t);e&&200===e.code?x(e.data):a.error((null==e?void 0:e.message)??"获取失败")}finally{w(!1)}})()}},style:{marginRight:"10px"},children:"查找"}),s.jsx(i,{type:"primary",ghost:!0,onClick:()=>u(-1),children:"返回"})]}),s.jsx("div",{style:{marginTop:"20px"},children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"60px"}}),h.map(((t,e)=>s.jsxs("th",{style:{width:"200px"},children:[s.jsx("div",{children:k(t.week)}),s.jsx("div",{children:t.time})]},e)))]})}),s.jsx("tbody",{children:Array.from({length:24},((t,e)=>s.jsxs("tr",{children:[s.jsx("td",{style:{width:"60px",height:"60px"},children:s.jsx("div",{style:{marginTop:"-30px",textAlign:"right",paddingRight:"8px"},children:` ${e.toString().padStart(2,"0")}:00`})}),h.map(((t,r)=>{var i,a,n;return s.jsx("td",{style:{backgroundColor:(n=null==(i=t.weekarr[e])?void 0:i.status,0===n?"rgb(99,183,243)":5===n?"rgb(7,193, 96)":"rgb(240,242,245)"),textAlign:"center",border:"1px solid #fff",padding:"20px 0",color:c(null==(a=t.weekarr[e])?void 0:a.status)},children:t.weekarr[e].schedule?t.weekarr[e].schedule:o(t.weekarr[e].status)},r)}))]},e)))})]})})]})})};export{h as default};
